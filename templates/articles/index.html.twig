{% extends 'base.html.twig' %}

{% block title %}Articles index
{% endblock %}

{% block body %}
	<h1>Articles index</h1>

	<table class="table">

		<tbody>
			{% for article in articles %}
				<tr>
					<td>{{ article.name }}</td>
					<td>{{ article.description }}</td>
					<td><img src="{{ path('articles_image', {'images': article.images}) }}"/></td>

					{% if is_granted("ROLE_ADMIN") %}
						<td>
							<a href="{{ path('app_articles_show', {'id': article.id}) }}">show</a>
							<a href="{{ path('app_articles_edit', {'id': article.id}) }}">edit</a>
						</td>
					{% endif %}
				</tr>
			{% else %}
				<tr>
					<td colspan="5">no records found</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	{% if is_granted("ROLE_ADMIN") %}
		<a href="{{ path('app_articles_new') }}">Create new</a>
	{% endif %}

	{% if app.user %}
		{{ app.user.email }}
		<a href="{{ path('app_logout') }}">
			Se d√©connecter</a>
	{% else %}
		<a href="{{ path('login') }}">
			Se connecter</a>
	{% endif %}

{% endblock %}
